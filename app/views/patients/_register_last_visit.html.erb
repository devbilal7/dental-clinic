<%= form_tag({:controller => "patients", :action => "create_last_visit"}, {:method => :post}) do %>
    <div class="mb-2 content-center flex items-center flex-wrap justify-between"> 
        <div class=" flex flex-wrap items-center" style="max-width:29%;flex:29%;padding:0 10px 0 0;">
            <span class="max-w-xs pr-2 label-wrap" style="max-width:81px;flex:81px;"  ><%= t("patient.Patient Number") %></span>
            <div class="flex input-wrapper" style="max-width:calc(100% - 81px );flex:calc(100% - 81px);" >
                <%= search_field_tag :patient_number, "", class:"mr-1 w-full patient-number md:col-span-1 w-[160px] focus:ring-indigo-500 focus:border-indigo-500 block shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder: t("patient.Patient Number") %>
            </div>
        </div>  
        <div class=" flex flex-wrap items-center" style="max-width:29%;flex:29%;padding:0 10px 0 0;">
            <span class="max-w-xs pl-2 label-wrap"  style="max-width:81px;flex:81px;" > <%= t("patient.Patient Name") %></span>
            <div class="flex input-wrapper" style="max-width:calc(100% - 81px );flex:calc(100% - 81px );" > 
                <%= text_field_tag :patient_name, "",id: "patient-name", class:"w-full md:col-span-1 w-[160px] focus:ring-indigo-500 focus:border-indigo-500 block shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder: t("patient.Patient Name") %>
            </div>  
        </div>     
        <div class=" flex flex-wrap items-center" style="max-width:29%;flex:29%;padding:0 10px 0 0;">
            <span class="max-w-xs px-2 label-wrap" style="max-width:100px;flex:100px;"><%= "最終来院" %></span>
            <div class="input-wrapper" style="max-width:calc(100% - 100px );flex:calc(100% - 100px );" >
                <%= text_field_tag :next_reservation,"", autocomplete: "off", class:"min-date-today w-[160px] datepicker bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pr-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500", placeholder:"yyyy/mm/dd" %>
            </div>
        </div>
        <div class="p-5" style="max-width:13%;flex:13%;">
                <%= submit_tag( t("patient.Add Last Visit"), :class=>"cursor-pointer col-span-1 active items-center px-4 py-1 border border-transparent  font-small rounded-md shadow-xl text-white bg-[#43c17a] hover:bg-green-500 w-[167px]", :name=>"submit") %>
        </div>
    </div>
<% end %>
<script>
    $(".patient-number").on("keyup",function(){
        $("#patient-name").val("");
            $.ajax({
            type: "get",
            data: "patient_number="+$(".patient-number").val(),
            url: "<%= get_patient_path %>"
        }) 
    })
</script>

<style>


html.translated-ltr .label-wrap {
    max-width: 150px !important;
    flex: 150px !important;
}

html.translated-ltr .input-wrapper {
    max-width: calc(100% - 150px ) !important;
    flex: calc(100% - 150px ) !important;
}

</style>